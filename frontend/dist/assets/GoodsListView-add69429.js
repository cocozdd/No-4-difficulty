import{d as T,u as Y,v as H,b as J,c as k,a as O,w as Q,e as a,f as v,h as e,i as l,m as P,n as r,x as W,p as y,l as w,j as C,g as c,F as G,k as X,t as f,q as Z,s as ee,_ as oe}from"./index-4373494d.js";import{u as te}from"./goodsStore-c6f4904d.js";import{g as le}from"./image-d30f5149.js";const ae=_=>(Z("data-v-3e973a0f"),_=_(),ee(),_),se={class:"goods-list-view"},ne=ae(()=>c("span",{class:"divider"},"~",-1)),ce={class:"goods-content"},de=["src"],ie={class:"goods-body"},re={class:"description"},ue={class:"meta"},_e={class:"price"},pe={class:"stock"},me={key:0,class:"pagination"},u=2,ge=T({__name:"GoodsListView",setup(_){const x=Y(),d=te(),S=H(),o=J({category:void 0,minPrice:void 0,maxPrice:void 0,keyword:""}),M=k(()=>S.isAuthenticated),i=O(1),h=k(()=>d.goods.length),B=k(()=>{const n=(i.value-1)*u;return d.goods.slice(n,n+u)}),F=()=>{i.value=1,d.loadGoods({category:o.category,minPrice:o.minPrice,maxPrice:o.maxPrice,keyword:o.keyword})},I=()=>{o.category=void 0,o.minPrice=void 0,o.maxPrice=void 0,o.keyword="",i.value=1,d.loadGoods()},N=n=>x.push(`/goods/${n}`),U=()=>x.push("/goods/mine"),L=n=>{i.value=n};return Q(()=>d.goods.length,n=>{const s=Math.max(1,Math.ceil(n/u));i.value>s&&(i.value=s)}),d.goods.length||d.loadGoods(),(n,s)=>{const p=a("el-option"),A=a("el-select"),m=a("el-form-item"),V=a("el-input-number"),D=a("el-input"),g=a("el-button"),z=a("el-form"),b=a("el-card"),E=a("el-skeleton-item"),R=a("el-empty"),q=a("el-col"),$=a("el-row"),j=a("el-pagination"),K=a("el-skeleton");return r(),v("div",se,[e(b,{class:"filter-card"},{default:l(()=>[e(z,{model:o,inline:"",onSubmit:s[4]||(s[4]=W(()=>{},["prevent"]))},{default:l(()=>[e(m,{label:"Category"},{default:l(()=>[e(A,{modelValue:o.category,"onUpdate:modelValue":s[0]||(s[0]=t=>o.category=t),placeholder:"Filter by category",clearable:""},{default:l(()=>[e(p,{label:"All",value:void 0}),e(p,{label:"Electronics",value:"Electronics"}),e(p,{label:"Books",value:"Books"}),e(p,{label:"Daily",value:"Daily"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"Price Range"},{default:l(()=>[e(V,{modelValue:o.minPrice,"onUpdate:modelValue":s[1]||(s[1]=t=>o.minPrice=t),min:0,placeholder:"Min"},null,8,["modelValue"]),ne,e(V,{modelValue:o.maxPrice,"onUpdate:modelValue":s[2]||(s[2]=t=>o.maxPrice=t),min:0,placeholder:"Max"},null,8,["modelValue"])]),_:1}),e(m,{label:"Keyword"},{default:l(()=>[e(D,{modelValue:o.keyword,"onUpdate:modelValue":s[3]||(s[3]=t=>o.keyword=t),placeholder:"Search product",clearable:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(g,{type:"primary",onClick:F},{default:l(()=>[y("Apply")]),_:1}),e(g,{onClick:I},{default:l(()=>[y("Reset")]),_:1}),M.value?(r(),w(g,{key:0,type:"success",onClick:U},{default:l(()=>[y(" Manage My Goods ")]),_:1})):C("",!0)]),_:1})]),_:1},8,["model"])]),_:1}),e(K,{loading:P(d).loading,animated:""},{template:l(()=>[e(E,{variant:"rect",style:{width:"100%",height:"148px","margin-bottom":"16px"}})]),default:l(()=>[c("div",ce,[h.value?(r(),v(G,{key:1},[e($,{gutter:16,class:"goods-grid"},{default:l(()=>[(r(!0),v(G,null,X(B.value,t=>(r(),w(q,{key:t.id,xs:24,sm:12,md:8},{default:l(()=>[e(b,{class:"goods-card",shadow:"hover"},{default:l(()=>[c("img",{src:t.coverImageUrl||P(le)(t.category),alt:"",class:"goods-cover"},null,8,de),c("div",ie,[c("h3",null,f(t.title),1),c("p",re,f(t.description),1),c("div",ue,[c("span",_e,"CNY "+f(t.price),1),c("span",pe,"Left: "+f(t.quantity),1),e(g,{size:"small",type:"primary",onClick:ve=>N(t.id)},{default:l(()=>[y("View detail")]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),h.value>u?(r(),v("div",me,[e(j,{layout:"prev, pager, next","current-page":i.value,"page-size":u,total:h.value,onCurrentChange:L},null,8,["current-page","total"])])):C("",!0)],64)):(r(),w(R,{key:0,description:"No goods found"}))])]),_:1},8,["loading"])])}}});const ke=oe(ge,[["__scopeId","data-v-3e973a0f"]]);export{ke as default};
