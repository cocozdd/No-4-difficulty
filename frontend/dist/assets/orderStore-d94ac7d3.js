import{r as d,N as c,a as n}from"./index-4373494d.js";import{u}from"./goodsStore-c6f4904d.js";const l=t=>d.post("/orders",t),i=()=>d.get("/orders"),O=(t,o)=>d.patch(`/orders/${t}`,o),p=c("orderStore",()=>{const t=n([]),o=n(!1);return{orders:t,loading:o,loadOrders:async()=>{o.value=!0;try{const{data:s}=await i();t.value=s}finally{o.value=!1}},submitOrder:async s=>{const{data:r}=await l(s);t.value=[r,...t.value];const a=u();return a.loadGoods(),a.loadMyGoods(),r},changeOrderStatus:async(s,r)=>{const{data:a}=await O(s,r);if(t.value=t.value.map(e=>e.id===s?a:e),r.status==="CANCELED"){const e=u();e.loadGoods(),e.loadMyGoods()}return a}}});export{p as u};
