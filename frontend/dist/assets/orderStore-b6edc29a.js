import{C as d,D as c,v as n}from"./index-bb0676e0.js";import{u}from"./goodsStore-dad07cae.js";const l=t=>d.post("/orders",t),i=()=>d.get("/orders"),O=(t,o)=>d.patch(`/orders/${t}`,o),p=c("orderStore",()=>{const t=n([]),o=n(!1);return{orders:t,loading:o,loadOrders:async()=>{o.value=!0;try{const{data:s}=await i();t.value=s}finally{o.value=!1}},submitOrder:async s=>{const{data:r}=await l(s);t.value=[r,...t.value];const e=u();return e.loadGoods(),e.loadMyGoods(),r},changeOrderStatus:async(s,r)=>{const{data:e}=await O(s,r);if(t.value=t.value.map(a=>a.id===s?e:a),r.status==="CANCELED"){const a=u();a.loadGoods(),a.loadMyGoods()}return e}}});export{p as u};
